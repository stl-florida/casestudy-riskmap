{"version":3,"sources":["app.js","environment.js","main.js","resources/index.js","routes/riskmap/riskmap.js","app.less","resources/styles/themeGuide.less","routes/riskmap/riskmap.less"],"names":["App","configureRouter","config","router","title","options","pushState","root","map","route","name","moduleId","mapUnknownRoutes","redirect","attached","self","debug","testing","configure","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","RiskMap","EventAggregator","ea","layers","flood","id","type","source","url","paint","stormsurge","groundwater","property","stops","activate","param","risk","console","log","addLayerToMap","layer","addLayer","layout","visibility","accessToken","Map","attributionControl","container","center","zoom","style","hash","addControl","NavigationControl","on","group","detached","layer_key","flood_key","getLayer","removeLayer","removeSource"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  configureRouter(config, router) {\n    config.title = 'RiskMap';\n    config.options.pushState = true;\n    config.options.root = '/';\n    config.map([\n      {route: '', name: 'map', moduleId: 'routes/riskmap/riskmap'}\n    ]);\n    config.mapUnknownRoutes({redirect: ''});\n    this.router = router;\n  }\n\n  attached() {\n    var self = this;\n\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import mapboxgl from 'mapbox-gl';\n\nexport class RiskMap {\n\n  constructor(EventAggregator) {\n    this.ea = EventAggregator;\n\n    this.layers = {\n      flood: [\n        {\n          id: \"FLDHVE\",\n          type: 'fill',\n          source: {\n            url: 'mapbox://asbarve.b0mn3fbb',\n            type: 'vector'\n          },\n          paint: {\n            \"fill-color\": \"#fccf23\",\n            \"fill-opacity\": 0.9\n          }\n        },\n        {\n          id: 'FLDHAO',\n          type: 'fill',\n          source: {\n            url: 'mapbox://asbarve.1eqmjn9o',\n            type: 'vector'\n          },\n          paint: {\n            \"fill-color\": \"#fc610b\",\n            \"fill-opacity\": 0.8\n          }\n        },\n        {\n          id: 'FLDHAE',\n          type: 'fill',\n          source: {\n            url: 'mapbox://asbarve.4cou1y2j',\n            type: 'vector'\n          },\n          paint: {\n            \"fill-color\": \"#c44d3f\",\n            \"fill-opacity\": 0.7\n          }\n        },\n        {\n          id: 'FLDHAH',\n          type: 'fill',\n          source: {\n            url: 'mapbox://asbarve.758t0cbw',\n            type: 'vector'\n          },\n          paint: {\n            \"fill-color\": \"#6576a5\",\n            \"fill-opacity\": 0.5\n          }\n        },\n        {\n          id: 'FLDHX',\n          type: 'fill',\n          source: {\n            url: 'mapbox://asbarve.44qg0o2f',\n            type: 'vector'\n          },\n          paint: {\n            \"fill-color\": \"#368bd8\",\n            \"fill-opacity\": 0.25\n          }\n        }\n      ],\n      stormsurge: [{\n        id: 'stormsurge',\n        type: 'fill',\n        source: {\n          url: 'mapbox://asbarve.41947bz4',\n          type: 'vector'\n        },\n        paint: {\n          \"fill-color\": {\n            \"property\": \"CAT\",\n            \"type\": \"categorical\",\n            \"stops\": [\n              [\n                \"1\",\n                \"#c1272d\"\n              ],\n              [\n                \"2\",\n                \"#cd5257\"\n              ],\n              [\n                \"3\",\n                \"#d97d81\"\n              ],\n              [\n                \"4\",\n                \"#e6a8ab\"\n              ],\n              [\n                \"5\",\n                \"#f2d3d5\"\n              ]\n            ]\n          },\n          \"fill-opacity\": {\n            \"property\": \"CAT\",\n            \"type\": \"categorical\",\n            \"stops\": [\n              [\n                \"1\",\n                0.7\n              ],\n              [\n                \"2\",\n                0.6\n              ],\n              [\n                \"3\",\n                0.5\n              ],\n              [\n                \"4\",\n                0.4\n              ],\n              [\n                \"5\",\n                0.3\n              ]\n            ]\n          }\n        }\n      }],\n      groundwater: [\n        {\n          id: 'groundwater',\n          type: 'fill',\n          source: {\n            url: 'mapbox://asbarve.5wvk9kun',\n            type: 'vector'\n          },\n          paint: {\n            \"fill-color\": {\n              property: \"DN\",\n              type: \"exponential\",\n              stops: [\n                [44, '#d7191c'],\n                [60, '#e24631'],\n                [76, '#ee7446'],\n                [92, '#faa25v'],\n                [108, '#fdc076'],\n                [124, '#fed993'],\n                [140, '#fef2b0'],\n                [156, '#f2f9c5'],\n                [172, '#d8edd2'],\n                [188, '#bee1df'],\n                [204, '#a1d1e5'],\n                [220, '#7ab4d5'],\n                [236, '#5397c5'],\n                [256, '#2c7bb6']\n              ]\n            },\n            \"fill-opacity\": 0.8\n          }\n        },\n        {\n          id: 'salt_water',\n          type: 'line',\n          source: {\n            url: 'mapbox://asbarve.87xhq483',\n            type: 'vector'\n          },\n          paint: {\n            'line-color': '#f05022',\n            'line-width': 3\n          }\n        }\n      ]\n    };\n  }\n\n  activate(param) {\n    this.risk = param.risk;\n    console.log(this.risk);\n  }\n\n  addLayerToMap(layer) {\n    var self = this;\n    return self.map.addLayer({\n      id: layer.id,\n      type: layer.type,\n      source: layer.source,\n      \"source-layer\": layer.id,\n      layout: {\n        visibility: 'visible'\n      },\n      paint: layer.paint\n    });\n  }\n\n\n  attached() {\n    var self = this;\n\n    mapboxgl.accessToken = 'pk.eyJ1IjoiYXNiYXJ2ZSIsImEiOiJjajVvOGdpcmwzejNiMzJvODF2dGFqYWcxIn0.rAJZcytC7dbajv0wzWo8Kw';\n    self.map = new mapboxgl.Map({\n      attributionControl: false,\n      container: 'mapContainer',\n      center: [-80.25, 26.15],\n      zoom: 11,\n      style: 'mapbox://styles/mapbox/light-v9',\n      hash: false\n    });\n\n    self.map.addControl(new mapboxgl.NavigationControl({\n      // TODO: position NOT top-right\n    }));\n\n    self.map.on('load', () => {\n      for (let group in self.layers) {\n        console.log('checking group: ' + group);\n        if (group === self.risk) {\n          console.log('group ' + group + ' is active');\n          for (let layer of self.layers[group]) {\n            console.log(layer.id);\n            self.addLayerToMap(layer);\n          }\n        }\n      }\n    });\n  }\n\n  detached() {\n    var self = this;\n    for (let layer_key in self.layers) {\n      if (layer_key === 'flood') {\n        for (let flood_key in self.layers.flood) {\n          var id = self.layers.flood[flood_key].id;\n          if (self.map.getLayer(id)) {\n            self.map.removeLayer(id);\n            self.map.removeSource(id);\n          }\n        }\n      } else {\n        if (self.map.getLayer(self.layers[layer_key].id)) {\n          self.map.removeLayer(self.layers[layer_key].id);\n          self.map.removeSource(self.layers[layer_key].id);\n        }\n      }\n    }\n  }\n}\n","html, body {\n  width: 100%;\n  height: 100%;\n  margin: 0px;\n  padding: 0px;\n}\n","","@import \"styles/themeGuide.less\";\n\n#mapContainer {\n  width: 100%;\n  height: 100%;\n  margin: 0px;\n  padding: 0px;\n}\n"],"sourceRoot":".."}